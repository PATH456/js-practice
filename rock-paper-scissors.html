<!DOCTYPE html>
<head>
  <title>Rock-Paper-Scissors</title>

</head>

<body>
  <h1>
    Rock Paper Scissors
  </h1>

  <button onclick = "
  player+= 'rock';
  computer = pickRandomVariable(computer);
  findTheWinner(player, computer);
  player = '';
  computer = ['rock', 'paper', 'scissors'];
  check = '';"  
  >Rock</button>

  <button onclick ="
  player+= 'paper';
  computer = pickRandomVariable(computer);
  findTheWinner(player, computer);
  player = '';
  computer = ['rock', 'paper', 'scissors'];
  check = '';">Paper</button>

  <button onclick = "
  player+= 'scissors';
  
  computer = pickRandomVariable(computer);
  findTheWinner(player, computer);
  player = '';
  computer = ['rock', 'paper', 'scissors'];
  check = '';"
  >Scissors</button> 

  <div id = "announcement">
    <p id = "win-lose"></p>
    <p id = "pick"></p>
    <p id = "score"></p>
  </div>

  <button onclick = "
   resetScore()";
  >Reset Score</button>
  
<script>
  let player = '';
  let computer = ['rock', 'paper', 'scissors'];
  let check = '';
  let score = JSON.parse(localStorage.getItem('score')) || {
    win: 0,
    lose: 0,
    tie: 0
  }

  function pickRandomVariable(arr) {
    const randomIndex = Math.floor(Math.random() * arr.length);
    return arr[randomIndex];
  }

  function findTheWinner(player, computer) {
    if (player === 'rock') {
      if (computer === 'rock') {
        score.tie++;
        check += 'Tie';
      } else if (computer === 'paper') {
        score.lose++;
        check += 'You lose';
      } else {
        score.win++;
        check += 'You win';
      }
    } else if (player === 'paper') {
      if (computer === 'rock') {
        check+= 'You win';
        score.win++;
      } else if (computer === 'paper') {
        check += 'Tie';
        score.tie++;
      } else {
        check += 'You lose';
        score.lose++;
      }
    } else { 
      if (computer === 'rock') {
        check += 'You lose';
        score.lose++;
      } else if (computer === 'paper') {
        check += 'You win';
        score.win++;
      } else {
        check += 'Tie';
        score.tie++;
      }
    }
    const scoreJSON = JSON.stringify(score);
    localStorage.setItem('score', scoreJSON);

    document.querySelector('#win-lose').innerText = `${check}`;
    document.querySelector('#pick').innerText = `You ${player} - ${computer} Computer`;
    document.querySelector('#score').innerText = `Wins: ${score.win}, Loses: ${score.lose}, Tie: ${score.tie}`;


    // alert(`You picked ${player}. Computer picked ${computer}. ${check}\n\nWin: ${score.win},  Lose: ${score.lose},  Tie: ${score.tie}`);
  }
  function resetScore() {
    localStorage.removeItem('score');
    score.win = 0,
    score.lose = 0,
    score.tie = 0
    document.querySelector('#score').innerText = `Wins: ${score.win}, Loses: ${score.lose}, Tie: ${score.tie}`;
  };

</script>
  
</body>
</html>
